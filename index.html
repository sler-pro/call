<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>お客さんページ</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-analytics.js"></script>
</head>
<body>
    <h1>お客さんの注文番号入力</h1>
    <label for="orderNumber">番号を入力:</label>
    <input type="text" id="orderNumber" placeholder="番号を入力">
    <button onclick="submitOrder()">注文する</button>

    <h2>通知された番号:</h2>
    <div id="notificationArea"></div>

    <script>
        // Firebase設定
        const firebaseConfig = {
            apiKey: "AIzaSyCH6zwHDxDsz1JVl3C_5NAFPa7vEfFOw_o",
            authDomain: "call-7972e.firebaseapp.com",
            databaseURL: "https://call-7972e-default-rtdb.firebaseio.com",
            projectId: "call-7972e",
            storageBucket: "call-7972e.firebasestorage.app",
            messagingSenderId: "524718924216",
            appId: "1:524718924216:web:fa1312e48099d60181af4d",
            measurementId: "G-DE63T918LF"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database(app);

        // 注文番号を送信する関数
        function submitOrder() {
            const orderNumber = document.getElementById('orderNumber').value;
            if (orderNumber) {
                // Firebaseに注文番号を送信
                firebase.database().ref('orders/').push({
                    orderNumber: orderNumber,
                    status: '待機中'
                });
                document.getElementById('orderNumber').value = ''; // 入力欄をクリア
            }
        }

        // リアルタイムで通知を受け取る
        firebase.database().ref('orders/').on('child_added', function(snapshot) {
            const orderData = snapshot.val();
            const orderElement = document.createElement('div');
            orderElement.textContent = `注文番号: ${orderData.orderNumber}, 状態: ${orderData.status}`;
            document.getElementById('notificationArea').appendChild(orderElement);
        });
    </script>
</body>
</html>
