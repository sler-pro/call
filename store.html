<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>お店側ページ</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-analytics.js"></script>
</head>
<body>
    <h1>お店側の注文一覧</h1>
    <div id="orderList"></div>

    <script>
        // Firebase設定
        const firebaseConfig = {
            apiKey: "AIzaSyCH6zwHDxDsz1JVl3C_5NAFPa7vEfFOw_o",
            authDomain: "call-7972e.firebaseapp.com",
            databaseURL: "https://call-7972e-default-rtdb.firebaseio.com",
            projectId: "call-7972e",
            storageBucket: "call-7972e.firebasestorage.app",
            messagingSenderId: "524718924216",
            appId: "1:524718924216:web:fa1312e48099d60181af4d",
            measurementId: "G-DE63T918LF"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database(app);

        // 注文一覧を表示する
        firebase.database().ref('orders/').on('child_added', function(snapshot) {
            const orderData = snapshot.val();
            const orderId = snapshot.key;
            const orderButton = document.createElement('button');
            orderButton.textContent = `注文番号: ${orderData.orderNumber}`;
            orderButton.onclick = function() {
                // 注文番号を変更
                firebase.database().ref('orders/' + orderId).update({
                    status: '準備完了'
                });
            };
            document.getElementById('orderList').appendChild(orderButton);
        });
    </script>
</body>
</html>
